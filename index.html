<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather App</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="weather-app">
      <div class="top-bar">
        <h3 style="background-color: #4383cc; padding: 5px">Weather App</h3>
        <div class="search-bar">
          <input type="text" placeholder="Enter city name here" />
          <button id="searchBtn">Search</button>
        </div>
      </div>

      <div class="weather-info">
        <div class="temperature">
          <h2></h2>
          <img
            src="https://cdn-icons-png.flaticon.com/512/1163/1163624.png"
            alt="Cloud Icon"
          />
          <p>Few Clouds</p>
        </div>

        <div class="container">
          <div class="bottom-left-bar">
            <p><strong>Wind:</strong></p>
            <p><strong>Humidity:</strong></p>
          </div>
          <div class="bottom-right-bar">
            <p><strong>Pressure:</strong></p>
            <p><strong>Cloudiness:</strong></p>
          </div>
        </div>
      </div>
    </div>

    <script>
      document
        .getElementById("searchBtn")
        .addEventListener("click", function () {
          const city = document.querySelector(".search-bar input").value.trim();
          if (!city) {
            alert("Please enter a city name");
            return;
          }
          fetchWeather(city);
        });

      var inputBox = document.querySelector(".search-bar input");

      inputBox.addEventListener("keydown", function (event) {
        if (event.key === "Enter") {
          var city = inputBox.value.trim();

          if (city === "") {
            alert("Please enter a city name");
            return;
          }

          fetchWeather(city);
        }
      });

      function fetchWeather(city) {
        var apiKey = "e0d63cfad1e836b0b4d0e101b20aa685";

        var apiUrl =
          "https://api.openweathermap.org/data/2.5/weather?q=" +
          encodeURIComponent(city) +
          "&units=metric&appid=" +
          apiKey;

        fetch(apiUrl)
          .then(function (response) {
            if (!response.ok) {
              throw new Error("City not found");
            }

            return response.json();
          })
          .then(function (data) {
            updateWeatherUI(data);
          })
          .catch(function (error) {
            alert(error.message);
          });
      }

      function updateWeatherUI(data) {
        var tempElement = document.querySelector(".temperature h2");
        tempElement.textContent = data.main.temp.toFixed(2) + "Â°";

        var descElement = document.querySelector(".temperature p");
        descElement.textContent = data.weather[0].description;

        // Weather icon
        var iconElement = document.querySelector(".temperature img");
        iconElement.src =
          "https://openweathermap.org/img/wn/" + data.weather[0].icon + ".png";
        iconElement.alt = data.weather[0].description;

        // Wind Speed
        var windElement = document.querySelector(
          ".bottom-left-bar p:nth-child(1)"
        );
        windElement.innerHTML =
          "<strong>Wind:</strong> " + data.wind.speed + " m/s";

        // Humidity
        var humidityElement = document.querySelector(
          ".bottom-left-bar p:nth-child(2)"
        );
        humidityElement.innerHTML =
          "<strong>Humidity:</strong> " + data.main.humidity + "%";

        // Pressure
        var pressureElement = document.querySelector(
          ".bottom-right-bar p:nth-child(1)"
        );
        pressureElement.innerHTML =
          "<strong>Pressure:</strong> " + data.main.pressure + " hPa";

        // Cloudiness
        var cloudsElement = document.querySelector(
          ".bottom-right-bar p:nth-child(2)"
        );
        cloudsElement.innerHTML =
          "<strong>Cloudiness:</strong> " + data.clouds.all + "%";
      }
    </script>
  </body>
</html>
